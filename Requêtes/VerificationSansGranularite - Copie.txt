 QUERY ASK R1 
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
    ASK{
       ?res rdf:type ubmo:ReseauAssainissement.
       ?res ubmo:pente ?x.
        Filter (?x < "1") 
    }
END QUERY

QUERY SELECT R1
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
    SELECT ?res 
    WHERE{
       ?res rdf:type ubmo:ReseauAssainissement.
       ?res ubmo:pente ?x.
       Filter (?x < "1") 
     }
END QUERY

QUERY ASK R2 
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
    ASK  WHERE {
    {  
        SELECT ?blg ?wkt ?wkt1 ?u WHERE {    
            ?blg rdf:type ubmo:IfcBuilding.
            ?blg  geo:hasGeometry ?geom. 
            ?geom geo:asWKT ?wkt. 
            ?u rdf:type ubmo:IfcFlowSegment. 
            ?u ubmo:objectType ?val2.
            ?u geo:hasGeometry ?geom1. 
            ?geom1 geo:asWKT ?wkt1. 
            FILTER regex (str(?val2), "Waste") .
            BIND(geof:sfCrosses(?wkt, ?wkt1) as ?reslt)
            FILTER (?reslt = true)
        }  
    }
    ?bat rdf:type ubmo:Batiment.
    ?bat ubmo:raffine ?blg.
    ?bat ubmo:geoshape ?shape1.
    ?res rdf:type ubmo:ReseauAssainissement.
    ?res ubmo:geoshape ?shape2.
    FILTER (geof:distance(?shape1, ?shape2, uom:metre) < 50)
    BIND (geof:sfTouches(?shape2, ?wkt1) as ?rest)
    FILTER (?rest = false)
}         
END QUERY

QUERY SELECT R2
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
    SELECT ?res ?bat ?blg ?u WHERE {
    {  
        SELECT ?blg ?wkt ?wkt1 ?u WHERE {    
            ?blg rdf:type ubmo:IfcBuilding.
            ?blg  geo:hasGeometry ?geom. 
            ?geom geo:asWKT ?wkt. 
            ?u rdf:type ubmo:IfcFlowSegment. 
            ?u ubmo:objectType ?val2.
            ?u geo:hasGeometry ?geom1. 
            ?geom1 geo:asWKT ?wkt1. 
            FILTER regex (str(?val2), "Waste") .
            BIND(geof:sfCrosses(?wkt, ?wkt1) as ?reslt)
            FILTER (?reslt = true)
        }  
    }
    ?bat rdf:type ubmo:Batiment.
    ?bat ubmo:raffine ?blg.
    ?bat ubmo:geoshape ?shape1.
    ?res rdf:type ubmo:ReseauAssainissement.
    ?res ubmo:geoshape ?shape2.
    FILTER (geof:distance(?shape1, ?shape2, uom:metre) < 50)
    BIND (geof:sfTouches(?shape2, ?wkt1) as ?rest)
    FILTER (?rest = false)
}
END QUERY


 QUERY ASK R3 
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
    ASK  where {   
       ?reg rdf:type ubmo:Regard.
       ?res ubmo:profondeur_de_branchement ?x.
        Filter (?x > "60") 
    }
END QUERY

QUERY SELECT R3
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
    SELECT ?reg where {
       ?reg rdf:type ubmo:Regard.
       ?res ubmo:profondeur_de_branchement ?x.
        Filter (?x > "60")
     }
END QUERY

QUERY ASK R4 
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
    ASK  WHERE {  
    {
    SELECT ?w ?t ?val WHERE {  
        ?w rdf:type ubmo:IfcFlowFitting. 
        ?w ubmo:connectsPortToElement ?y. 
        ?y ubmo:connectsPorts ?z. 
        ?z ubmo:invConnectsPortToElement ?t. 
        ?t rdf:type ubmo:IfcFlowSegment. 
        ?t ubmo:objectType ?val.
    }}  
    {
    SELECT ?w1 ?t1 ?val1 WHERE {  
        ?w1 rdf:type ubmo:IfcFlowFitting. 
        ?w1 ubmo:connectsPortToElement ?y1. 
        ?y1 ubmo:connectsPorts ?z1. 
        ?z1 ubmo:invConnectsPortToElement ?t1. 
        ?t1 rdf:type ubmo:IfcFlowSegment. 
        ?t1 ubmo:objectType ?val1.
    }}  
    FILTER (?w = ?w1)  
    FILTER (?val = "rainwater")
    FILTER (?val1 != ?val)
}   
END QUERY

QUERY SELECT R4
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
    SELECT ?t ?w ?t1 WHERE {  
    {
    SELECT ?w ?t ?val WHERE {  
        ?w rdf:type ubmo:IfcFlowFitting. 
        ?w ubmo:connectsPortToElement ?y. 
        ?y ubmo:connectsPorts ?z. 
        ?z ubmo:invConnectsPortToElement ?t. 
        ?t rdf:type ubmo:IfcFlowSegment. 
        ?t ubmo:objectType ?val.
    }}  
    {
    SELECT ?w1 ?t1 ?val1 WHERE {  
        ?w1 rdf:type ubmo:IfcFlowFitting. 
        ?w1 ubmo:connectsPortToElement ?y1. 
        ?y1 ubmo:connectsPorts ?z1. 
        ?z1 ubmo:invConnectsPortToElement ?t1. 
        ?t1 rdf:type ubmo:IfcFlowSegment. 
        ?t1 ubmo:objectType ?val1.
    }}  
    FILTER (?w = ?w1)  
    FILTER (?val = "rainwater")
    FILTER (?val1 != ?val)
} 
END QUERY

QUERY ASK R5 
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
    ASK WHERE {
   ?res rdf:type ubmo:ReseauUnitaire.
   ?res ubmo:geoshape ?wkt1.
   ?par rdf:type ubmo:CadastreParcelle.
   ?par ubmo:geoshape ?wkt2. 

   {
   BIND (geo:sfContains (?wkt2, ?wkt1) as ?reslt1).
   FILTER(?reslt1 = true)
   }
   UNION 
   {
   BIND (geo:sfCrosses(?wkt1, ?wkt2) as ?reslt2).
   FILTER(?reslt2 = true)
   }
}        
END QUERY

QUERY SELECT R5
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
   SELECT ?par ?res WHERE {
   ?res rdf:type ubmo:ReseauUnitaire.
   ?res ubmo:geoshape ?wkt1.
   ?par rdf:type ubmo:CadastreParcelle.
   ?par ubmo:geoshape ?wkt2. 
   {
   BIND (geo:sfContains (?wkt2, ?wkt1) as ?reslt1).
   FILTER(?reslt1 = true)
   }
   UNION 
   {
   BIND (geo:sfCrosses(?wkt1, ?wkt2) as ?reslt2).
   FILTER(?reslt2 = true)
   }
}
END QUERY

QUERY ASK R6 
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
    ASK  WHERE {  
    {
    SELECT ?w ?t ?val WHERE {  
        ?w rdf:type ubmo:IfcFlowFitting. 
        ?w ubmo:connectsPortToElement ?y. 
        ?y ubmo:connectsPorts ?z. 
        ?z ubmo:invConnectsPortToElement ?t. 
        ?t rdf:type ubmo:IfcFlowSegment. 
        ?t ubmo:objectType ?val.
    } GROUP BY ?w ?t ?val
    }  
    {
    SELECT ?w1 ?t1 ?val1 WHERE {  
        ?w1 rdf:type ubmo:IfcFlowFitting. 
        ?w1 ubmo:connectsPortToElement ?y1. 
        ?y1 ubmo:connectsPorts ?z1. 
        ?z1 ubmo:invConnectsPortToElement ?t1. 
        ?t1 rdf:type ubmo:IfcFlowSegment. 
        ?t1 ubmo:objectType ?val1.
    } GROUP BY ?w1 ?t1 ?val1
    }
    FILTER (?w = ?w1)  
    FILTER(?val = "waste")
    FILTER (?val != ?val1)
}      
END QUERY

QUERY SELECT R6
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
    SELECT ?t ?w ?t1 WHERE {  
    {
    SELECT ?w ?t ?val WHERE {  
        ?w rdf:type ubmo:IfcFlowFitting. 
        ?w ubmo:connectsPortToElement ?y. 
        ?y ubmo:connectsPorts ?z. 
        ?z ubmo:invConnectsPortToElement ?t. 
        ?t rdf:type ubmo:IfcFlowSegment. 
        ?t ubmo:objectType ?val.
    } GROUP BY ?w ?t ?val
    }  
    {
    SELECT ?w1 ?t1 ?val1 WHERE {  
        ?w1 rdf:type ubmo:IfcFlowFitting. 
        ?w1 ubmo:connectsPortToElement ?y1. 
        ?y1 ubmo:connectsPorts ?z1. 
        ?z1 ubmo:invConnectsPortToElement ?t1. 
        ?t1 rdf:type ubmo:IfcFlowSegment. 
        ?t1 ubmo:objectType ?val1.
    } GROUP BY ?w1 ?t1 ?val1
    }
    FILTER (?w = ?w1)  
    FILTER(?val = "waste")
    FILTER (?val != ?val1)
}  
END QUERY

QUERY ASK R7 
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
    ASK WHERE {  
    {
    ?blg rdf:type ubmo:IfcBuilding.
    ?blg geo:hasGeometry ?geom. 
    ?geom geo:asWKT ?wkt. 
    ?w rdf:type ubmo:IfcFlowTerminal. 
    ?w ubmo:connectsPortToElement ?y. 
    ?y rdf:type ubmo:IfcDistributionPort.  
    ?y ubmo:connectsPorts ?z. 
    ?z rdf:type ubmo:IfcDistributionPort.  
    ?z ubmo:invConnectsPortToElement ?u. 
    ?u rdf:type ubmo:IfcFlowSegment. 
    ?u geo:hasGeometry ?geom1. 
    ?geom1 geo:asWKT ?wkt1. 
    BIND(geof:sfContains(?wkt, ?wkt1) as ?reslt)
    FILTER(?reslt = False) 
    }
    UNION 
    {
    ?w1 rdf:type ubmo:IfcFlowTerminal. 
    ?w1 ubmo:connectsPortToElement ?y1. 
    ?y1 rdf:type ubmo:IfcDistributionPort.  
    ?y1 ubmo:connectsPorts ?z1. 
    ?z1 rdf:type ubmo:IfcDistributionPort.  
    ?z1 ubmo:invConnectsPortToElement ?u1. 
    ?u1 rdf:type ubmo:IfcFlowSegment. 
    ?u1 geo:hasGeometry ?geom2. 
    ?geom2 geo:asWKT ?wkt2. 
    BIND(ext:area(?wkt2) as ?erea) 
    FILTER(?erea > 1)
    }
}        
END QUERY

QUERY SELECT R7
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
    SELECT ?u ?u1 WHERE {  
    {
    ?blg rdf:type ubmo:IfcBuilding.
    ?blg geo:hasGeometry ?geom. 
    ?geom geo:asWKT ?wkt. 
    ?w rdf:type ubmo:IfcFlowTerminal. 
    ?w ubmo:connectsPortToElement ?y. 
    ?y rdf:type ubmo:IfcDistributionPort.  
    ?y ubmo:connectsPorts ?z. 
    ?z rdf:type ubmo:IfcDistributionPort.  
    ?z ubmo:invConnectsPortToElement ?u. 
    ?u rdf:type ubmo:IfcFlowSegment. 
    ?u geo:hasGeometry ?geom1. 
    ?geom1 geo:asWKT ?wkt1. 
    BIND(geof:sfContains(?wkt, ?wkt1) as ?reslt)
    FILTER(?reslt = False) 
    }
    UNION 
    {
    ?w1 rdf:type ubmo:IfcFlowTerminal. 
    ?w1 ubmo:connectsPortToElement ?y1. 
    ?y1 rdf:type ubmo:IfcDistributionPort.  
    ?y1 ubmo:connectsPorts ?z1. 
    ?z1 rdf:type ubmo:IfcDistributionPort.  
    ?z1 ubmo:invConnectsPortToElement ?u1. 
    ?u1 rdf:type ubmo:IfcFlowSegment. 
    ?u1 geo:hasGeometry ?geom2. 
    ?geom2 geo:asWKT ?wkt2. 
    BIND(ext:area(?wkt2) as ?erea) 
    FILTER(?erea > 1)
    }
}
END QUERY


QUERY ASK R8 
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
    ASK  
WHERE {
    {
    SELECT ?par ((?sumbat/?area1*100) as ?percent) 
    WHERE {
        {
        SELECT ?par ?area1 (SUM(xsd:double(?val3)) as ?sumbat) 
        WHERE { 
            ?quar rdf:type ubmo:Quartier.
            ?quar ubmo:quartier ?val.
            FILTER(?val = "CENTRE VILLE" )
            ?par rdf:type ubmo:CadastreParcelle.
            ?par ubmo:shape_area ?val2.
            ?bat rdf:type ubmo:Batiment.
            ?bat ubmo:shape_are ?val3.
            ?quar geo:sfContains ?par.
            ?par geo:sfContains ?bat.
            BIND((xsd:double(?val2)) as ?area1)  
        } 
        GROUP BY ?par ?area1 
        }     }    }
    {
    SELECT ?par ((?sumbat/?area1*100) as ?percent1) 
    WHERE {
        {
        SELECT ?par ?area1 (SUM(?area2) as ?sumbat) 
        WHERE { 
            ?quar rdf:type ubmo:Quartier.
            ?quar ubmo:quartier ?val.
            FILTER(?val = "CENTRE VILLE" )
            ?par rdf:type ubmo:CadastreParcelle.
            ?quar geo:sfContains ?par.
            ?par ubmo:geoshape ?wkt.
            ?par ubmo:shape_area ?val1.
            BIND((xsd:double(?val1)) as ?area1)  
            ?bat rdf:type ubmo:Batiment.
            ?par geo:sfOverlaps ?bat.
            ?bat ubmo:geoshape ?wkt2.
            BIND(geof:intersection(?wkt, ?wkt2) as ?inter) 
            BIND(ext:area(?inter) as ?area2) 
        } 
        GROUP BY ?par ?area1 
        }     }     }
    BIND ((?percent + ?percent1) as ?percentTotal)
    FILTER (?percentTotal > 90)
}         
END QUERY

QUERY SELECT R8
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
    SELECT ?par ?percentTotal 
WHERE {
    {
    SELECT ?par ((?sumbat/?area1*100) as ?percent) 
    WHERE {
        {
        SELECT ?par ?area1 (SUM(xsd:double(?val3)) as ?sumbat) 
        WHERE { 
            ?quar rdf:type ubmo:Quartier.
            ?quar ubmo:quartier ?val.
            FILTER(?val = "CENTRE VILLE" )
            ?par rdf:type ubmo:CadastreParcelle.
            ?par ubmo:shape_area ?val2.
            ?bat rdf:type ubmo:Batiment.
            ?bat ubmo:shape_are ?val3.
            ?quar geo:sfContains ?par.
            ?par geo:sfContains ?bat.
            BIND((xsd:double(?val2)) as ?area1)  
        } 
        GROUP BY ?par ?area1 
        }     }    }
    {
    SELECT ?par ((?sumbat/?area1*100) as ?percent1) 
    WHERE {
        {
        SELECT ?par ?area1 (SUM(?area2) as ?sumbat) 
        WHERE { 
            ?quar rdf:type ubmo:Quartier.
            ?quar ubmo:quartier ?val.
            FILTER(?val = "CENTRE VILLE" )
            ?par rdf:type ubmo:CadastreParcelle.
            ?quar geo:sfContains ?par.
            ?par ubmo:geoshape ?wkt.
            ?par ubmo:shape_area ?val1.
            BIND((xsd:double(?val1)) as ?area1)  
            ?bat rdf:type ubmo:Batiment.
            ?par geo:sfOverlaps ?bat.
            ?bat ubmo:geoshape ?wkt2.
            BIND(geof:intersection(?wkt, ?wkt2) as ?inter) 
            BIND(ext:area(?inter) as ?area2) 
        } 
        GROUP BY ?par ?area1 
        }     }     }
    BIND ((?percent + ?percent1) as ?percentTotal)
    FILTER (?percentTotal > 90)
} 
END QUERY


QUERY ASK R9 
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
        ASK 
    WHERE {
        ?quar rdf:type ubmo:Quartier.
        ?quar ubmo:quartier ?val1.
        FILTER(?val1 = "CENTRE VILLE")
        ?par rdf:type ubmo:CadastreParcelle.
        ?par ubmo:geoshape ?q1.
        ?par ubmo:shape_area ?val.
        BIND((xsd:double(?val)) as ?val4)  
        ?cad rdf:type ubmo:CadastreBatiment.
        ?cad ubmo:geoshape ?q2.
        ?cad ubmo:shape_area ?val2.
        BIND(xsd:double(?val2) as ?val3).
        ?quar geo:sfContains|geo:sfOverlaps ?par.
        ?quar geo:sfContains|geo:sfOverlaps ?cad.
        BIND(geof:sfContains(?q1, ?q2) as ?reslt)
        FILTER(?reslt = true)
      }  
      GROUP BY ?par ?val4
      HAVING ((?sumcad/?val4*100) > 90)
    }       
END QUERY

QUERY SELECT R9
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
    SELECT ?par ((?sumcad/?val4*100) as ?percent)
WHERE {
  {
    SELECT ?par ?val4 (SUM(?val3) as ?sumcad)
    WHERE {
      ?quar rdf:type ubmo:Quartier.
      ?quar ubmo:quartier ?val1.
      FILTER(?val1 = "CENTRE VILLE")
      ?par rdf:type ubmo:CadastreParcelle.
      ?par ubmo:geoshape ?q1.
      ?par ubmo:shape_area ?val.
      BIND((xsd:double(?val)) as ?val4)  
      ?cad rdf:type ubmo:CadastreBatiment.
      ?cad ubmo:geoshape ?q2.
      ?cad ubmo:shape_area ?val2.
      BIND(xsd:double(?val2) as ?val3).
      ?quar geo:sfContains|geo:sfOverlaps ?par.
      ?quar geo:sfContains|geo:sfOverlaps ?cad.
      BIND(geof:sfContains(?q1, ?q2) as ?reslt)
      FILTER(?reslt = true)
    }
    GROUP BY ?par ?val4
  }
  HAVING ((?sumcad/?val4*100) > 90)
} 
END QUERY

QUERY ASK R10 
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
    ASK WHERE {
    ?u1 rdf:type ubmo:IfcEnergyConversionDevice.
    FILTER NOT EXISTS {
        ?u1 ubmo:connectsPortToElement ?y.
        ?y ubmo:connectsPorts ?z.
        ?z ubmo:invConnectsPortToElement ?t.
        ?t rdf:type ubmo:IfcFlowController.
        ?t ubmo:name ?o.
        FILTER (regex(str(?o), "Valve") || regex(str(?o), "Backflow Preventer"))
    }
}       
END QUERY

QUERY SELECT R10
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
    SELECT ?u1 WHERE {
    ?u1 rdf:type ubmo:IfcEnergyConversionDevice.
    FILTER NOT EXISTS {
        ?u1 ubmo:connectsPortToElement ?y.
        ?y ubmo:connectsPorts ?z.
        ?z ubmo:invConnectsPortToElement ?t.
        ?t rdf:type ubmo:IfcFlowController.
        ?t ubmo:name ?o.
        FILTER (regex(str(?o), "Valve") || regex(str(?o), "Backflow Preventer"))
    }
}
END QUERY


QUERY ASK R11 
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
    ASK WHERE {
    ?s rdf:type ubmo:IfcSpace.
    FILTER NOT EXISTS {
        ?s ubmo:longName ?i.
        FILTER(regex(str(?i), "Kitchen") || regex(str(?i), "Bathr"))
        ?s ubmo:ifcSpaceBoundary ?x.
        ?x ubmo:longName ?windowName.
        FILTER (regex(str(?windowName), "Window"))
    }
}        
END QUERY

QUERY SELECT R11
    PREFIX geo: <http://www.opengis.net/ont/geosparql#>
    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
    PREFIX ubmo: <http://w3id.org/UrbanAndBuildingMultiscaleOntology#>
    PREFIX geof: <http://www.opengis.net/def/function/geosparql/> 
    SELECT ?s WHERE {
    ?s rdf:type ubmo:IfcSpace.
    FILTER NOT EXISTS {
        ?s ubmo:longName ?i.
        FILTER(regex(str(?i), "Kitchen") || regex(str(?i), "Bathr"))
        ?s ubmo:ifcSpaceBoundary ?x.
        ?x ubmo:longName ?windowName.
        FILTER (regex(str(?windowName), "Window"))
    }
} 
END QUERY













